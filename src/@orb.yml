version: 2.1

description: >
  Add a custom script that gets the public ip address of the current box and calls the AWS CLI to add an inbound security rule on the fly.
  Then remove that rule at the end of the script.
  Referring to https://circleci.com/developer/orbs/orb/configure/aws-white-list-circleci-ip.

display:
  home_url: "https://circleci.com/developer/orbs/orb/inokappa/"
  source_url: "https://github.com/inokappa/aws-sg-white-list-circleci-ip"

orbs:
  aws-cli: circleci/aws-cli@1.3.0
